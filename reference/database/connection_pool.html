
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ja.crystal-lang.org/reference/database/connection_pool.html">
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>コネクションプール - Crystal</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.196e0c26.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="blue">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#connection-pool" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://ja.crystal-lang.org/reference/" title="Crystal" class="md-header-nav__button md-logo" aria-label="Crystal">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Crystal
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              コネクションプール
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/crystal-lang/crystal/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://ja.crystal-lang.org/reference/" title="Crystal" class="md-nav__button md-logo" aria-label="Crystal">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Crystal
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/crystal-lang/crystal/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" class="md-nav__link">
      導入
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    <label class="md-nav__link" for="nav-2">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../getting_started/index.html" style="display: block">
      
        Getting Started
      </a>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../getting_started/index.html" style="display: block">
        
          Getting Started
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/http_server.html" class="md-nav__link">
      HTTP サーバー
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../getting_started/cli.html" class="md-nav__link">
      コマンドライアプリケーション
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../using_the_compiler/index.html" class="md-nav__link">
      コンパイラの使い方
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../the_shards_command/index.html" class="md-nav__link">
      shards コマンド
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/index.html" class="md-nav__link">
      このガイドについて
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    <label class="md-nav__link" for="nav-6">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/index.html" style="display: block">
      
        構文とその意味
      </a>
    </label>
    <nav class="md-nav" aria-label="構文とその意味" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/index.html" style="display: block">
        
          構文とその意味
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/comments.html" class="md-nav__link">
      コメント
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2" >
    <label class="md-nav__link" for="nav-6-2">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/literals/index.html" style="display: block">
      
        リテラル
      </a>
    </label>
    <nav class="md-nav" aria-label="リテラル" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/literals/index.html" style="display: block">
        
          リテラル
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/nil.html" class="md-nav__link">
      Nil
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/bool.html" class="md-nav__link">
      真偽値 (Bool)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/integers.html" class="md-nav__link">
      整数 (Integer)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/floats.html" class="md-nav__link">
      浮動小数点数 (Float)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/char.html" class="md-nav__link">
      文字 (Char)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/string.html" class="md-nav__link">
      文字列 (String)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/symbol.html" class="md-nav__link">
      シンボル (Symbol)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/array.html" class="md-nav__link">
      配列 (Array)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/hash.html" class="md-nav__link">
      ハッシュ (Hash)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/range.html" class="md-nav__link">
      範囲 (Range)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/regex.html" class="md-nav__link">
      正規表現 (Regex)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/tuple.html" class="md-nav__link">
      タプル (Tuple)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/named_tuple.html" class="md-nav__link">
      名前付きタプル (NamedTuple)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/proc.html" class="md-nav__link">
      Proc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/literals/command.html" class="md-nav__link">
      コマンド (Command)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/assignment.html" class="md-nav__link">
      代入
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/local_variables.html" class="md-nav__link">
      ローカル変数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5" >
    <label class="md-nav__link" for="nav-6-5">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/control_expressions.html" style="display: block">
      
        制御式
      </a>
    </label>
    <nav class="md-nav" aria-label="制御式" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/control_expressions.html" style="display: block">
        
          制御式
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/truthy_and_falsey_values.html" class="md-nav__link">
      真になる値と偽になる値
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-5-2" type="checkbox" id="nav-6-5-2" >
    <label class="md-nav__link" for="nav-6-5-2">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/if.html" style="display: block">
      
        if
      </a>
    </label>
    <nav class="md-nav" aria-label="if" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-2">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/if.html" style="display: block">
        
          if
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/as_a_suffix.html" class="md-nav__link">
      後置 if
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/as_an_expression.html" class="md-nav__link">
      式としての if
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/ternary_if.html" class="md-nav__link">
      3項演算子
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/if_var.html" class="md-nav__link">
      if var
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/if_varis_a.html" class="md-nav__link">
      if var.is_a?(...)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/if_varresponds_to.html" class="md-nav__link">
      if var.responds_to?(...)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/if_var_nil.html" class="md-nav__link">
      if var.nil?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/not.html" class="md-nav__link">
      if !
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/unless.html" class="md-nav__link">
      unless
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/case.html" class="md-nav__link">
      case
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-5-5" type="checkbox" id="nav-6-5-5" >
    <label class="md-nav__link" for="nav-6-5-5">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/while.html" style="display: block">
      
        while
      </a>
    </label>
    <nav class="md-nav" aria-label="while" data-md-level="3">
      <label class="md-nav__title" for="nav-6-5-5">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/while.html" style="display: block">
        
          while
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/break.html" class="md-nav__link">
      break
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/next.html" class="md-nav__link">
      next
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/until.html" class="md-nav__link">
      until
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/and.html" class="md-nav__link">
      &&
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/or.html" class="md-nav__link">
      ||
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/requiring_files.html" class="md-nav__link">
      ファイルの require
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-7" type="checkbox" id="nav-6-7" >
    <label class="md-nav__link" for="nav-6-7">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/types_and_methods.html" style="display: block">
      
        型とメソッド
      </a>
    </label>
    <nav class="md-nav" aria-label="型とメソッド" data-md-level="2">
      <label class="md-nav__title" for="nav-6-7">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/types_and_methods.html" style="display: block">
        
          型とメソッド
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/everything_is_an_object.html" class="md-nav__link">
      すべてがオブジェクト
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/the_program.html" class="md-nav__link">
      プログラム
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-7-3" type="checkbox" id="nav-6-7-3" >
    <label class="md-nav__link" for="nav-6-7-3">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/classes_and_methods.html" style="display: block">
      
        クラスとメソッド
      </a>
    </label>
    <nav class="md-nav" aria-label="クラスとメソッド" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-3">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/classes_and_methods.html" style="display: block">
        
          クラスとメソッド
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/new%2C_initialize_and_allocate.html" class="md-nav__link">
      new/initialize/allocate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/methods_and_instance_variables.html" class="md-nav__link">
      メソッドとインスタンス変数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/type_inference.html" class="md-nav__link">
      型推論
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/union_types.html" class="md-nav__link">
      ユニオン型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/overloading.html" class="md-nav__link">
      オーバーロード
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/default_and_named_arguments.html" class="md-nav__link">
      デフォルト引数と名前付き引数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/splats_and_tuples.html" class="md-nav__link">
      スプラット展開とタプル
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/type_restrictions.html" class="md-nav__link">
      型制約
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/return_types.html" class="md-nav__link">
      戻り値の型
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/default_values_named_arguments_splats_tuples_and_overloading.html" class="md-nav__link">
      メソッドの引数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/operators.html" class="md-nav__link">
      演算子
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/visibility.html" class="md-nav__link">
      可視性
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-7-3-13" type="checkbox" id="nav-6-7-3-13" >
    <label class="md-nav__link" for="nav-6-7-3-13">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/inheritance.html" style="display: block">
      
        継承
      </a>
    </label>
    <nav class="md-nav" aria-label="継承" data-md-level="4">
      <label class="md-nav__title" for="nav-6-7-3-13">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/inheritance.html" style="display: block">
        
          継承
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/virtual_and_abstract_types.html" class="md-nav__link">
      virtual 型と abstract 型
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/class_methods.html" class="md-nav__link">
      クラスメソッド
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/class_variables.html" class="md-nav__link">
      クラス変数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/finalize.html" class="md-nav__link">
      finalize
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/modules.html" class="md-nav__link">
      モジュール
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/generics.html" class="md-nav__link">
      ジェネリクス
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/structs.html" class="md-nav__link">
      構造体 (Struct)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/constants.html" class="md-nav__link">
      定数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/enum.html" class="md-nav__link">
      列挙型 (Enum)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-7-9" type="checkbox" id="nav-6-7-9" >
    <label class="md-nav__link" for="nav-6-7-9">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/blocks_and_procs.html" style="display: block">
      
        ブロックと Proc
      </a>
    </label>
    <nav class="md-nav" aria-label="ブロックと Proc" data-md-level="3">
      <label class="md-nav__title" for="nav-6-7-9">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/blocks_and_procs.html" style="display: block">
        
          ブロックと Proc
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/capturing_blocks.html" class="md-nav__link">
      ブロックの捕捉
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/proc_literal.html" class="md-nav__link">
      Proc リテラル
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/block_forwarding.html" class="md-nav__link">
      ブロックのフォワーディング
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/closures.html" class="md-nav__link">
      クロージャ
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/alias.html" class="md-nav__link">
      型エイリアス (alias)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/exception_handling.html" class="md-nav__link">
      例外の処理
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/type_grammar.html" class="md-nav__link">
      型の文法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-10" type="checkbox" id="nav-6-10" >
    <label class="md-nav__link" for="nav-6-10">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/type_reflection.html" style="display: block">
      
        型のリフレクション
      </a>
    </label>
    <nav class="md-nav" aria-label="型のリフレクション" data-md-level="2">
      <label class="md-nav__title" for="nav-6-10">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/type_reflection.html" style="display: block">
        
          型のリフレクション
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/is_a.html" class="md-nav__link">
      is_a?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/nil_question.html" class="md-nav__link">
      nil?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/responds_to.html" class="md-nav__link">
      responds_to?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/as.html" class="md-nav__link">
      as
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/as_question.html" class="md-nav__link">
      as?
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/typeof.html" class="md-nav__link">
      typeof
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-11" type="checkbox" id="nav-6-11" >
    <label class="md-nav__link" for="nav-6-11">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/macros/index.html" style="display: block">
      
        マクロ
      </a>
    </label>
    <nav class="md-nav" aria-label="マクロ" data-md-level="2">
      <label class="md-nav__title" for="nav-6-11">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/macros/index.html" style="display: block">
        
          マクロ
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/macros/macro_methods.html" class="md-nav__link">
      マクロメソッド
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/macros/hooks.html" class="md-nav__link">
      フック
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/macros/fresh_variables.html" class="md-nav__link">
      フレッシュ変数
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-12" type="checkbox" id="nav-6-12" >
    <label class="md-nav__link" for="nav-6-12">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/annotations/index.html" style="display: block">
      
        アノテーション
      </a>
    </label>
    <nav class="md-nav" aria-label="アノテーション" data-md-level="2">
      <label class="md-nav__title" for="nav-6-12">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/annotations/index.html" style="display: block">
        
          アノテーション
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/annotations/built_in_annotations.html" class="md-nav__link">
      組み込みアノテーション
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-13" type="checkbox" id="nav-6-13" >
    <label class="md-nav__link" for="nav-6-13">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/low_level_primitives.html" style="display: block">
      
        低レベルプリミティブ
      </a>
    </label>
    <nav class="md-nav" aria-label="低レベルプリミティブ" data-md-level="2">
      <label class="md-nav__title" for="nav-6-13">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/low_level_primitives.html" style="display: block">
        
          低レベルプリミティブ
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/pointerof.html" class="md-nav__link">
      pointerof
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/sizeof.html" class="md-nav__link">
      sizeof
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/instance_sizeof.html" class="md-nav__link">
      instance_sizeof
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/offsetof.html" class="md-nav__link">
      offsetof
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/declare_var.html" class="md-nav__link">
      初期化しない変数宣言
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-14" type="checkbox" id="nav-6-14" >
    <label class="md-nav__link" for="nav-6-14">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/compile_time_flags.html" style="display: block">
      
        コンパイル時のフラグ
      </a>
    </label>
    <nav class="md-nav" aria-label="コンパイル時のフラグ" data-md-level="2">
      <label class="md-nav__title" for="nav-6-14">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/compile_time_flags.html" style="display: block">
        
          コンパイル時のフラグ
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/cross-compilation.html" class="md-nav__link">
      クロスコンパイル
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-15" type="checkbox" id="nav-6-15" >
    <label class="md-nav__link" for="nav-6-15">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/c_bindings/index.html" style="display: block">
      
        C バインディング
      </a>
    </label>
    <nav class="md-nav" aria-label="C バインディング" data-md-level="2">
      <label class="md-nav__title" for="nav-6-15">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/c_bindings/index.html" style="display: block">
        
          C バインディング
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/lib.html" class="md-nav__link">
      lib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-15-2" type="checkbox" id="nav-6-15-2" >
    <label class="md-nav__link" for="nav-6-15-2">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../syntax_and_semantics/c_bindings/fun.html" style="display: block">
      
        fun
      </a>
    </label>
    <nav class="md-nav" aria-label="fun" data-md-level="3">
      <label class="md-nav__title" for="nav-6-15-2">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../syntax_and_semantics/c_bindings/fun.html" style="display: block">
        
          fun
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/out.html" class="md-nav__link">
      out
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/to_unsafe.html" class="md-nav__link">
      to_unsafe
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/struct.html" class="md-nav__link">
      struct
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/union.html" class="md-nav__link">
      union
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/enum.html" class="md-nav__link">
      enum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/variables.html" class="md-nav__link">
      変数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/constants.html" class="md-nav__link">
      定数
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/type.html" class="md-nav__link">
      type
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/alias.html" class="md-nav__link">
      型エイリアス (alias)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/c_bindings/callbacks.html" class="md-nav__link">
      コールバック
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../syntax_and_semantics/unsafe.html" class="md-nav__link">
      安全でない (unsafe) コード
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    <label class="md-nav__link" for="nav-7">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../conventions/index.html" style="display: block">
      
        規約
      </a>
    </label>
    <nav class="md-nav" aria-label="規約" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../conventions/index.html" style="display: block">
        
          規約
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../conventions/coding_style.html" class="md-nav__link">
      コーディングスタイル
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../conventions/documenting_code.html" class="md-nav__link">
      コードのドキュメント化
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    <label class="md-nav__link" for="nav-8">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="index.html" style="display: block">
      
        データベース
      </a>
    </label>
    <nav class="md-nav" aria-label="データベース" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="index.html" style="display: block">
        
          データベース
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="connection.html" class="md-nav__link">
      接続
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="connection_pool.html" class="md-nav__link--active" style="display: block">
        
          コネクションプール
        </a>
      </label>
    
    <a href="connection_pool.html" class="md-nav__link md-nav__link--active">
      コネクションプール
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    設定
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample" class="md-nav__link">
    Sample
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="transactions.html" class="md-nav__link">
      トランザクション
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" >
    <label class="md-nav__link" for="nav-9">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../guides/index.html" style="display: block">
      
        ガイド
      </a>
    </label>
    <nav class="md-nav" aria-label="ガイド" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../guides/index.html" style="display: block">
        
          ガイド
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/performance.html" class="md-nav__link">
      パフォーマンス
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/concurrency.html" class="md-nav__link">
      並列性
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/testing.html" class="md-nav__link">
      テスト
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-4" type="checkbox" id="nav-9-4" >
    <label class="md-nav__link" for="nav-9-4">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../guides/writing_shards.html" style="display: block">
      
        shard の作り方
      </a>
    </label>
    <nav class="md-nav" aria-label="shard の作り方" data-md-level="2">
      <label class="md-nav__title" for="nav-9-4">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../guides/writing_shards.html" style="display: block">
        
          shard の作り方
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/hosting/github.html" class="md-nav__link">
      GitHub でのホスト方法
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/hosting/gitlab.html" class="md-nav__link">
      GitLab でのホスト方法
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-9-5" type="checkbox" id="nav-9-5" >
    <label class="md-nav__link" for="nav-9-5">
      <span class="md-nav__icon md-icon"></span>
      
        <a href="../guides/ci/index.html" style="display: block">
      
        継続的インテグレーション (CI)
      </a>
    </label>
    <nav class="md-nav" aria-label="継続的インテグレーション (CI)" data-md-level="2">
      <label class="md-nav__title" for="nav-9-5">
        <span class="md-nav__icon md-icon"></span>
        
          <a href="../guides/ci/index.html" style="display: block">
        
          継続的インテグレーション (CI)
        </a>
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/ci/gh-actions.html" class="md-nav__link">
      GitHub Actions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/ci/travis.html" class="md-nav__link">
      Travis CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/ci/circleci.html" class="md-nav__link">
      CircleCI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../guides/static_linking.html" class="md-nav__link">
      静的リンク
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../platform_support.html" class="md-nav__link">
      Platform Support
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    設定
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sample" class="md-nav__link">
    Sample
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/crystal-jp/ja.crystal-lang.org/tree/master/locale/ja/crystal-book/docs/database/connection_pool.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="connection-pool">Connection pool</h1>
<p>When a connection is established it usually means opening a TCP connection or Socket. The socket will handle one statement at a time. If a program needs to perform many queries simultaneously, or if it handles concurrent requests that aim to use a database, it will need more than one active connection.</p>
<p>Since databases are separate services from the application using them, the connections might go down, the services might be restarted, and other sort of things the program might not want to care about.</p>
<p>To address this issues usually a connection pool is a neat solution.</p>
<p>When a database is opened with <code>crystal-db</code> there is already a connection pool working. <code>DB.open</code> returns a <code>DB::Database</code> object which manages the whole connection pool and not just a single connection.</p>
<div class="highlight"><pre><span></span><code><span class="no">DB</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;mysql://root@localhost/test&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">db</span><span class="o">|</span>
  <span class="c1"># db is a DB::Database</span>
<span class="k">end</span>
</code></pre></div>
<p>When executing statements using <code>db.query</code>, <code>db.exec</code>, <code>db.scalar</code>, etc. the algorithm goes:</p>
<ol>
<li>Find an available connection in the pool.<ol>
<li>Create one if needed and possible.</li>
<li>If the pool is not allowed to create a new connection, wait a for a connection to become available.
    1. But this wait should be aborted if it takes too long.</li>
</ol>
</li>
<li>Checkout that connection from the pool.</li>
<li>Execute the SQL command.</li>
<li>If there is no <code>DB::ResultSet</code> yielded, return the connection to the pool. Otherwise, the connection will be returned to the pool when the ResultSet is closed.</li>
<li>Return the statement result.</li>
</ol>
<p>If a connection can't be created, or if a connection loss occurs while the statement is performed the above process is repeated.</p>
<blockquote>
<p>The retry logic only happens when the statement is sent through the <code>DB::Database</code> . If it is sent through a <code>DB::Connection</code> or <code>DB::Transaction</code> no retry is performed since the code will state that certain connection object was expected to be used.</p>
</blockquote>
<h2 id="_1">設定</h2>
<p>The behavior of the pool can be configured from a set of parameters that can appear as query string in the connection URI.</p>
<table>
<thead>
<tr>
<th align="left">名前</th>
<th align="left">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">initial_pool_size</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">max_pool_size</td>
<td align="left">0 (unlimited)</td>
</tr>
<tr>
<td align="left">max_idle_pool_size</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">checkout_timeout</td>
<td align="left">5.0 (seconds)</td>
</tr>
<tr>
<td align="left">retry_attempts</td>
<td align="left">1</td>
</tr>
<tr>
<td align="left">retry_delay</td>
<td align="left">1.0 (seconds)</td>
</tr>
</tbody>
</table>
<p>When <code>DB::Database</code> is opened an initial number of <code>initial_pool_size</code> connections will be created. The pool will never hold more than <code>max_pool_size</code> connections. When returning/releasing a connection to the pool it will be closed if there are already <code>max_idle_pool_size</code> idle connections.</p>
<p>If the <code>max_pool_size</code> was reached and a connection is needed, wait up to <code>checkout_timeout</code> seconds for an existing connection to become available.</p>
<p>If a connection is lost or can't be established retry at most <code>retry_attempts</code> times waiting <code>retry_delay</code> seconds between each try.</p>
<h2 id="sample">Sample</h2>
<p>The following program will print the current time from MySQL but if the connection is lost or the whole server is down for a few seconds the program will still run without raising exceptions.</p>
<div class="admonition example">
<p class="admonition-title">sample.cr</p>
</div>
<div class="highlight"><pre><span></span><code><span class="k">require</span> <span class="s2">&quot;mysql&quot;</span>

    <span class="no">DB</span><span class="o">.</span><span class="n">open</span> <span class="s2">&quot;mysql://root@localhost?retry_attempts=8&amp;retry_delay=3&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">db</span><span class="o">|</span>
      <span class="nb">loop</span> <span class="k">do</span>
        <span class="bp">pp</span> <span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span>
        <span class="nb">sleep</span> <span class="mf">0.5</span>
      <span class="k">end</span>
    <span class="k">end</span>
    <span class="sb">```</span>

<span class="sb">```</span><span class="n">console</span>
<span class="err">$</span> <span class="n">crystal</span> <span class="n">sample</span><span class="o">.</span><span class="n">cr</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:36:57</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:36:57</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:36:58</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:36:58</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:36:59</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:36:59</span>
<span class="c1"># stop mysql server for some seconds</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:37:06</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:37:06</span>
<span class="n">db</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;SELECT NOW()&quot;</span><span class="p">)</span> <span class="c1"># =&gt; 2016-12-16 16:37:07</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="connection.html" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                接続
              </div>
            </div>
          </a>
        
        
          <a href="transactions.html" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                トランザクション
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>